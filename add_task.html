<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Task | Join</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/header.css" />
    <link rel="stylesheet" href="css/sidebar.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/add_task.css">
    <link rel="icon" type="image/x-icon" href="../assets/image/join-logo.svg">

</head>

<body onload="includeHTML(1)">
    <div w3-include-html="./assets/templates/header.html"></div>
    <div class="sidebar" w3-include-html="./assets/templates/sidebar.html"></div>

    <form onsubmit="return false;" id="addTaskContainer">
        <div class="add-task" onchange="collectTaskData()">
            <h1>Add Task</h1>
            <div class="task-input-container">
                <div class="task-input-cell">
                    <div class="task-title">
                        <label for="newTaskTitle">Title</label>
                        <input type="text" id="newTaskTitle" placeholder="Enter a title" required>
                    </div>

                    <div class="task-description">
                        <label for="newTaskDescription">Description</label>
                        <textarea id="newTaskDescription" placeholder="Enter a Description"></textarea>
                    </div>

                    <div class="task-assigned-users">
                        <label for="newTaskAssignedUser">Assigned to</label>
                        <div id="newTaskAssignedUser">
                            <div class="dropdown-field" onclick="changeAvailableUsersVisibility()">
                                <input type="text" id="dropDownTextFieldInput" onchange="showAvailableUsers()"
                                    class='dropdown-field-text' value="Select contacts to assign">
                                <img id='assignUsersDropDownIcon' class='dropdown-field-icon'
                                    src="./assets/icons/arrow-drop.svg">
                            </div>
                            <div class="dropdown-content hide" id="dropDownContent">
                                <div id="selectAssignedUserList">

                                </div>
                                <div class='dropdown-button-container'>
                                    <button type="button" class="default-button dropdown-button">Add new contact
                                        <img src='./assets/icons/person-add.svg'>
                                    </button>
                                </div>
                            </div>

                        </div>
                        <div id='assignedUserList'></div>
                    </div>

                </div>

                <div class="task-input-cell task-input-not-first-cell">

                    <div class="task-date">
                        <label for="newTaskDate">Due Date</label>
                        <input type="date" id="newTaskDate" placeholder="dd/mm/yy" pattern="\d{4}-\d{2}-\d{2}">
                    </div>

                    <div class="task-priority">
                        <label for="newTaskPriority">Prio</label>
                        <div id='newTaskPriority'>
                            <button id='urgentButton' type="button" class="priority-button" value="urgent"
                                onclick="setPrioButtonSelected(this)">Urgent<img id='urgentIcon' class='prio-icon'
                                    src="./assets/icons/prio-urgent.svg"></button>
                            <button id='mediumButton' type="button" class="priority-button" value="medium"
                                onclick="setPrioButtonSelected(this)">Medium<img id='mediumIcon' class='prio-icon'
                                    src="./assets/icons/prio-medium.svg"></button>
                            <button id='lowButton' type="button" class="priority-button" value="low"
                                onclick="setPrioButtonSelected(this)">Low<img id='lowIcon' class='prio-icon'
                                    src="./assets/icons/prio-low.svg"></button>
                        </div>
                    </div>

                    <label for="taskCategory">Category</label>
                    <div class="task-category" id="taskCategory">
                        <input type='hidden' id='taskCategoryValue' >
                        <div class="task-category-header" id="taskCategoryHeader"
                            onclick="rotateIconBy180('categoryDropDownIcon')">
                            <p>Select Task Category</p>
                            <img id='categoryDropDownIcon' class='dropdown-field-icon'
                                src="./assets/icons/arrow-drop.svg">
                        </div>
                        <div class="task-category-list">
                            <div class="task-category-item" data-value="Technical Task">Technical Task</div>
                            <div class="task-category-item" data-value="User Story">User Story</div>
                        </div>
                    </div>

                    <div class="task-subtask">
                        <label for="newTaskSubTask">Subtasks</label>
                        <div class="subtask-field">
                            <input type="text" class="subtask-input-field" id="subtaskField"
                                placeholder="Add new Subtask">
                            <img id='enterSubtaskCreation' class="animated-icon" src="./assets/icons/puls-icon.svg">
                            <div id='approveSubtaskMenu' class="approve-subtask-menu hide">
                                <img src="./assets/icons/x-icon.svg" id="declineEnteredTaskIcon" class="animated-icon"
                                    onclick="resetSubTaskInput()">
                                <div class="approve-subtask-menu-border"></div>
                                <img src='./assets/icons/checkmark-icon.svg' id="approveEnteredTaskIcon"
                                    class="animated-icon" onclick="createSubTask()">
                            </div>
                        </div>
                        <div class="subtask-display">
                            <div id="currentSelectedSubtasks">

                            </div>
                            <div id="editSubTaskField"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-options">
                <button type='button' onclick="emptyAddTaskForm()" class="alternative-button">Clear</button>
                <button type='button' id="createTask" onclick="createTask()" class="default-button" disabled>
                    Create Task</button>
            </div>


        </div>
    </form>

    <script src="./script.js"></script>
    <!-- <script src=".js/summary.js"></script> -->
    <script src="./js/add_task.js"></script>
    <script src="./js/storage.js"></script>
</body>